extends layout
block content
  script(type='text/javascript', src="javascripts/gdopener.js")
  .off-canvas-wrap(data-offcanvas=true)
    .inner-wrap
      nav.tab-bar
        section.left-small
          a.left-off-canvas-toggle.menu-icon(href="#")
            span
        section.middle.tab-bar-section
          h1= title
      aside.left-off-canvas-menu
        ul.off-canvas-list
          li
            label= title
          li
            a(href="#") Control
          li
            a(href="#") Status
          li
            a(href="#") History
          li
            a(href="#") Settings
      section.main-section
        .row
          .large-12.columns
            h2.status= "State: " + (gdIsOpen ? "Open" : "Closed")
        .row
          .large-12.text-center.columns
            button.large.gdopener= (gdIsOpen ? "Go!" : "Open!")
        .row.percentage-slider(class=(gdIsOpen ? "hidden" : undefined))
          .small-10.medium-11.columns
            .range-slider(data-slider=true, data-options="display_selector: #sliderOutput; step: 1; start: 0; end: 100; initial: 100;")
              span.range-slider-handle(role="slider",tabindex="0")
              span.range-slider-active-segment
          .small-2.medium-1.columns
            span#sliderOutput
            span#percentage %
        .row.history
          .large-12.columns
            ul
              each val in history
                li
                  span= ["Garage", "Kitchen", "Patio"][val.DOOR_ID] + " Door"
                  span= (val.STATE === 0 ? "Closed" : "Open")
                  span= moment(val.CREATED_AT).tz("America/Los_Angeles").format('MMMM Do YYYY, h:mm:ss a')
      a.exit-off-canvas
